import{S as _,N as k,U as x,m as c,p as y,q as v,s as e,H as g,x as a,P as d,M as p,O as u,y as w,K as C,E as A,F as S}from"./index-9RE6n9LQ.js";import{A as O}from"./AppLayout-B8NHLmW9.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={components:{Link:_,AppLayout:O},props:{errors:Object,role:Object,allPermissions:{type:Object,required:!0}},data(){return{form:k({id:null,permissions:[]})}},mounted(){this.role&&(this.form.id=this.role.id,this.checkCheckboxes())},methods:{submit(){this.form.permissions.length==0?this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"No permission selected!"):this.form.post(route("settings.roles.permissions.update"),{onSuccess:()=>{this.resetForm(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},resetForm(){var o=this;Object.keys(this.$data.form).forEach(function(s,t){o.$data.form[s]=""}),Object.keys(this.$props.errors).forEach(function(s,t){o.$props.errors[s]=""})},toggleCheckboxes(o){let s=document.querySelector(`#checkbox_${o}`),t=document.querySelectorAll(`.perm_checkbox.${o}`);for(let i of t)if(i.checked=s.checked,i.checked)this.form.permissions.indexOf(i.value)===-1&&this.form.permissions.push(i.value);else{let n=this.form.permissions.indexOf(i.value);this.form.permissions.splice(n,1)}},checkCheckboxes(){let o=document.querySelectorAll(".perm_checkbox");for(let s of o)for(let t of this.role.permissions)s.value===t.name&&(s.checked=!0,this.form.permissions.indexOf(s.value)===-1&&this.form.permissions.push(s.value));console.log(this.form.permissions)}}},E={class:"row"},M={class:"col-md-12"},j={class:"card mb-4"},q=e("div",{class:"card-header pb-0"},[e("h5",null,"Permissions"),e("p",null,"Manage User Roles & Permissions.")],-1),F=e("hr",null,null,-1),L={class:"card-body"},N={id:"mytable",class:"display table table-responsive table-striped table-hover text-nowrap"},U=e("thead",null,[e("tr",null,[e("th",{class:"text-left",width:"150px"},"Name"),e("th",{width:"14%"},"Select All"),e("th",null,"Permissions")])],-1),z={class:"text-left text-capitalize"},B={class:"text-center"},V=["id","onClick"],D={class:"row"},R=["id","value"],H=["for"],K={key:0,class:"mt-4"},W=["disabled"];function G(o,s,t,i,n,m){const f=x("AppLayout");return c(),y(f,null,{default:v(()=>[e("div",E,[e("div",M,[e("div",j,[q,F,e("div",L,[e("form",{class:"form-validate",onSubmit:s[1]||(s[1]=g((...h)=>m.submit&&m.submit(...h),["prevent"]))},[e("table",N,[U,e("tbody",null,[(c(!0),a(u,null,d(t.allPermissions,(h,r)=>(c(),a("tr",{key:r},[e("td",z,p(r[0].toUpperCase()+r.slice(1).replace("-"," ")),1),e("td",B,[e("input",{class:"form-check-input perm_checkbox_all",style:{cursor:"pointer"},type:"checkbox",id:"checkbox_"+r.replaceAll(" ",""),onClick:l=>m.toggleCheckboxes(r.replaceAll(" ",""))},null,8,V)]),e("td",null,[e("div",D,[(c(!0),a(u,null,d(h,l=>(c(),a("div",{class:"col-3 my-2",key:l.id},[w(e("input",{class:A("form-check-input me-2 perm_checkbox "+r.replaceAll(" ","")),id:l.name,style:{cursor:"pointer"},type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=b=>n.form.permissions=b),value:l.name},null,10,R),[[C,n.form.permissions]]),e("label",{class:"form-check-label text-capitalize",for:l.name,style:{"font-size":"13px",cursor:"pointer"}},p(l.name.replace(r+".","")),9,H)]))),128))])])]))),128))])]),o.$root.hasPermission("roles-permissions.edit")?(c(),a("div",K,[e("button",{type:"submit",class:"btn btn-main me-2",disabled:n.form.processing}," Update ",8,W)])):S("",!0)],32)])])])])]),_:1})}const T=P($,[["render",G]]);export{T as default};
