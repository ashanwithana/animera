import{S as V,N as y,U as _,m as l,p as k,q as f,s,F as m,H as u,y as a,V as c,M as t,X as b,x as d,P as h,O as w,t as v,Q as g}from"./index-9RE6n9LQ.js";import{A as C}from"./AppLayout-B8NHLmW9.js";import{F as A}from"./FileInputComponent-B0Tgu-DD.js";import M from"./SuspendedUserAlert-BD0QikcU.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{Link:V,AppLayout:C,FileInputComponent:A,SuspendedUserAlert:M},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:y({id:"",name:"",email:"",mobile_no:"",role:"",branch:"",password:"",password_confirmation:"",profile_image:""}),password:y({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){let i=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:"",this.form.branch=this.backendUser.branch.id),$(".card-body").on("change","#role",function(r){i.form.role=$(r.target).val()}),$(".card-body").on("change","#branch",function(r){i.form.branch=$(r.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(i=>({...i,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},B={class:"row"},L={class:"col-md-12"},E={class:"card mb-4"},N=s("div",{class:"card-header pb-0"},[s("h5",null,"Backend Users"),s("p",null,"Manage Backend Users.")],-1),D=s("hr",null,null,-1),R={class:"card-body"},O={class:"row"},j={class:"mb-3 col-md-6"},q=s("label",{for:"name",class:"form-label"},"Full Name",-1),T={class:"text-danger"},W={class:"mb-3 col-md-6"},H=s("label",{for:"email",class:"form-label"},"Email",-1),Q={class:"text-danger"},X={class:"mb-3 col-md-6"},Y=s("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1),z={class:"text-danger"},G={class:"mb-3 col-md-6"},J=s("label",{for:"role",class:"form-label"},"Role",-1),K=s("option",{selected:"",value:""},"-- Select --",-1),Z=["value"],ss={class:"text-danger"},es={class:"mb-3 col-md-6"},os=s("label",{for:"branch",class:"form-label"},"Branch",-1),rs=["value"],ts={class:"text-danger"},ns={class:"mb-3 col-md-6"},ls=s("label",{for:"service_types",class:"form-label"},[g("Prefered Services"),s("sup",null,"*")],-1),as=["value"],ds={class:"text-danger"},is=s("div",{class:"h5 my-4"},"Authentication",-1),cs={key:0,class:"mb-3 col-md-6"},ms=s("label",{for:"password",class:"form-label"},"Password",-1),ps={class:"text-danger"},_s={key:1,class:"mb-3 col-md-6"},fs=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),us={class:"text-danger"},bs={class:"mb-3 col-md-6"},hs=s("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1),ws=s("br",null,null,-1),vs={class:"text-danger"},gs={class:"mt-2"},Us=["disabled"],ys=g("Cancel"),ks={key:0,class:"card"},xs=s("div",{class:"card-header pb-0"},[s("h5",null,"Update Password")],-1),Ss={class:"card-body"},Ps={class:"row"},Vs={key:0,class:"mb-3 col-md-6"},Cs=s("label",{for:"password",class:"form-label"},"Password",-1),As={class:"text-danger"},Ms={key:1,class:"mb-3 col-md-6"},Is=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),Fs={class:"text-danger"},Bs={class:"mt-2"},Ls=["disabled"],Es=g("Cancel"),Ns={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},Ds={class:"modal-dialog modal-sm",role:"document"},Rs={class:"modal-content"},Os=s("div",{class:"modal-header px-3 pb-2"},[s("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1),js={class:"modal-body py-0 px-3"},qs={class:"row"},Ts={class:"col mb-1"},Ws={class:"text-danger"},Hs=s("div",{class:"modal-footer px-3 pb-3"},[s("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1);function Qs(i,r,n,Xs,o,p){const x=_("SuspendedUserAlert"),S=_("FileInputComponent"),U=_("Link"),P=_("AppLayout");return l(),k(P,null,{default:f(()=>[s("div",B,[s("div",L,[s("div",E,[N,D,s("div",R,[n.backendUser&&n.backendUser.deleted_at?(l(),k(x,{key:0,userId:n.backendUser.id},null,8,["userId"])):m("",!0),s("form",{id:"formAccountSettings",onSubmit:r[9]||(r[9]=u((...e)=>p.submit&&p.submit(...e),["prevent"]))},[s("div",O,[s("div",j,[q,a(s("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":r[0]||(r[0]=e=>o.form.name=e)},null,512),[[c,o.form.name]]),s("div",T,t(o.form.errors.name),1)]),s("div",W,[H,a(s("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":r[1]||(r[1]=e=>o.form.email=e)},null,512),[[c,o.form.email]]),s("div",Q,t(o.form.errors.email),1)]),s("div",X,[Y,a(s("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":r[2]||(r[2]=e=>o.form.mobile_no=e)},null,512),[[c,o.form.mobile_no]]),s("div",z,t(o.form.errors.mobile_no),1)]),s("div",G,[J,a(s("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":r[3]||(r[3]=e=>o.form.role=e)},[K,(l(!0),d(w,null,h(n.allRoles,e=>(l(),d("option",{key:e.id,value:e.id},t(e.name),9,Z))),128))],512),[[b,o.form.role]]),s("div",ss,t(o.form.errors.role),1)]),s("div",es,[os,a(s("select",{class:"select2 form-control form-select",id:"branch","aria-label":"Default select example","onUpdate:modelValue":r[4]||(r[4]=e=>o.form.branch=e)},[(l(!0),d(w,null,h(n.branches,e=>(l(),d("option",{key:e.id,value:e.id},t(e.name),9,rs))),128))],512),[[b,o.form.branch]]),s("div",ts,t(o.form.errors.branch),1)]),s("div",ns,[ls,a(s("select",{class:"select2 form-control form-select",id:"service_types","aria-label":"Default select example","onUpdate:modelValue":r[5]||(r[5]=e=>o.form.service_types=e),multiple:!0},[(l(!0),d(w,null,h(n.service_types,e=>(l(),d("option",{key:e.id,value:e.id},t(e.name),9,as))),128))],512),[[b,o.form.service_types]]),s("div",ds,t(o.form.errors.service_types),1)]),is,n.backendUser?m("",!0):(l(),d("div",cs,[ms,a(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":r[6]||(r[6]=e=>o.form.password=e)},null,512),[[c,o.form.password]]),s("div",ps,t(o.form.errors.password),1)])),n.backendUser?m("",!0):(l(),d("div",_s,[fs,a(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":r[7]||(r[7]=e=>o.form.password_confirmation=e)},null,512),[[c,o.form.password_confirmation]]),s("div",us,t(o.form.errors.password),1)])),s("div",bs,[hs,ws,v(S,{isRequired:!1,id:"profile_image",prvImage:p.profileImage,modelValue:o.form.profile_image,"onUpdate:modelValue":r[8]||(r[8]=e=>o.form.profile_image=e)},null,8,["prvImage","modelValue"]),s("div",vs,t(o.form.errors.profile_image),1)])]),s("div",gs,[s("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},t(n.backendUser?"Update":"Save"),9,Us),v(U,{class:"btn btn-outline-danger",href:i.route("settings.users")},{default:f(()=>[ys]),_:1},8,["href"])])],32)])]),n.backendUser&&n.backendUser.deleted_at==null?(l(),d("div",ks,[xs,s("div",Ss,[s("form",{id:"formAccountSettings",onSubmit:r[12]||(r[12]=u((...e)=>i.updatePasssword&&i.updatePasssword(...e),["prevent"]))},[s("div",Ps,[n.backendUser?(l(),d("div",Vs,[Cs,a(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":r[10]||(r[10]=e=>o.password.password=e)},null,512),[[c,o.password.password]]),s("div",As,t(o.password.errors.password),1)])):m("",!0),n.backendUser?(l(),d("div",Ms,[Is,a(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":r[11]||(r[11]=e=>o.password.password_confirmation=e)},null,512),[[c,o.password.password_confirmation]]),s("div",Fs,t(o.password.errors.password),1)])):m("",!0)]),s("div",Bs,[s("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:o.form.processing||!(o.password.password.length>0&&o.password.password_confirmation.length>0)}," Update ",8,Ls),v(U,{class:"btn btn-outline-danger",href:i.route("settings.users")},{default:f(()=>[Es]),_:1},8,["href"])])],32)])])):m("",!0)]),s("div",Ns,[s("div",Ds,[s("div",Rs,[Os,s("form",{id:"formAccountDelete",onSubmit:r[14]||(r[14]=u((...e)=>p.changePassword&&p.changePassword(...e),["prevent"]))},[s("div",js,[s("div",qs,[s("div",Ts,[a(s("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":r[13]||(r[13]=e=>o.password.confirm_password=e)},null,512),[[c,o.password.confirm_password]]),s("div",Ws,t(o.password.errors.confirm_password),1)])])]),Hs],32)])])])])]),_:1})}const Zs=I(F,[["render",Qs]]);export{Zs as default};
