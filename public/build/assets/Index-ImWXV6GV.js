import{R as w,N as y,U as m,m as a,x as l,t as _,q as x,s as e,F as u,O as h,P as p,M as c,H as M,Q as n}from"./index-9RE6n9LQ.js";import{A as k}from"./AppLayout-B8NHLmW9.js";import{F as C}from"./FileInputComponent-B0Tgu-DD.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{Head:w,AppLayout:k,FileInputComponent:C},props:{collections:Object,allMedia:Object},data(){return{form:{c:"default"},media:y({id:"",name:"",file:""})}},mounted(){const t=new URLSearchParams(window.location.search).get("c");this.form.c=t,$("#file_uploadImagePreview").css("background-image","")},methods:{limitChars(o,t){return o.length>t?o.substring(0,t-3)+"...":o},humanReadableSize(o){let t=o,i=o/1024;return t<1024?t.toFixed(2)+"B":i<1024?i.toFixed(2)+"KB":(i/1024).toFixed(2)+"MB"},setImage(o){return"background-image:url("+o+")"},gotoCollection(o){this.form.c=o,this.$inertia.reload({preserveScroll:!1,data:{...this.form}})},deleteMediaPrompt(o,t){this.media.id=o,this.media.name=t},deleteMedia(){this.media.post(route("media.delete"),{preserveScroll:!0,onSuccess:()=>{$("#deleteMedia").modal("hide"),this.resetform(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"Profile Deleted Successfully! ")},onFinish:()=>{$("#deleteMedia").modal("hide"),this.resetform()}})},resetform(){this.media.reset("id","name","file")},uploadMedia(){this.media.transform(o=>({...o,collection:this.form.c})).post(route("media.upload"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{this.resetform(),$("#PreviewUploadMedia").modal("hide"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"File Uploaded Successfully! ")},onFinish:()=>{$("#deleteMedia").modal("hide"),this.resetform(),$("#file_uploadImagePreview").css("background-image","")}})}}},P={class:"row"},U={class:"col-md-12"},B={class:"card mb-4"},I={class:"card-header"},z=e("h5",null,"Media Library",-1),A=e("p",null,"Manage Your All Media.",-1),D={class:"d-flex"},L=e("i",{class:"bx bx-left-arrow-alt",style:{"margin-top":"-2px"}},null,-1),V=n("Back "),N=[L,V],j={key:1,class:"btn btn-sm btn-main ms-3","data-bs-toggle":"modal","data-bs-target":"#PreviewUploadMedia"},H=e("i",{class:"bx bxs-cloud-upload"},null,-1),R=n(" Upload Media "),O=[H,R],Y={class:"card-body",style:{"min-height":"50vh"}},K={class:"row"},T={class:"col-12"},q={class:"media-library-wrapper"},E={class:"row"},Q=["onDblclick"],G={class:"card border overflow-hidden"},J=["title"],W=e("i",{class:"bx bxs-folder"},null,-1),X=[W],Z={class:"card-footer p-0 p-2"},ee={class:"image-name text-capitalize"},se={class:"card border"},te=["title"],oe={class:"preview rounded-top",style:{overflow:"hidden"}},de=["src","alt"],ae={class:"card-footer p-0 p-2 position-relative"},le={class:"image-name text-capitalize"},ie={class:"image-name text-capitalize",style:{"font-size":"12px"}},ne=e("button",{type:"button",class:"btn btn-sm btn-primary btn-icon rounded-pill dropdown-toggle hide-arrow media-download","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"bx bx-dots-vertical-rounded"})],-1),re={class:"dropdown-menu dropdown-menu-end"},ce=["href"],me=e("i",{class:"bx bx-show"},null,-1),_e=n(" Preview "),ue=[me,_e],he=["href"],pe=e("i",{class:"bx bxs-download"},null,-1),be=n(" Download "),fe=[pe,be],ve=["onClick"],ge=e("i",{class:"bx bx-trash"},null,-1),we=n(" Delete "),ye=[ge,we],xe={class:"modal modal-top fade",id:"deleteMedia",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},Me={class:"modal-dialog modal-sm",role:"document"},ke={class:"modal-content"},Ce=e("div",{class:"modal-header px-3 pb-2"},[e("h5",{class:"modal-title",id:"exampleModalLabel2"},"Are You Sure?")],-1),Se={class:"modal-body py-0 px-3"},Fe={class:"row"},Pe={class:"col mb-1"},Ue={class:"modal-footer px-3 pb-3"},Be=e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Yes",-1),Ie={class:"modal fade",id:"PreviewUploadMedia",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},ze={class:"modal-dialog modal-dialog-centered",role:"document"},Ae={class:"modal-content"},De=e("div",{class:"modal-header pt-2"},[e("h5",{class:"modal-title",id:"modalCenterTitle"},"Upload media")],-1),Le={class:"modal-body py-2"},Ve={class:"row"},Ne={class:"modal-footer pb-2"};function je(o,t,i,He,r,d){const b=m("Head"),f=m("FileInputComponent"),v=m("AppLayout");return a(),l("div",null,[_(b,{title:"Media Library"}),_(v,null,{default:x(()=>[e("div",P,[e("div",U,[e("div",B,[e("div",I,[z,A,e("div",D,[r.form.c!="default"?(a(),l("button",{key:0,class:"btn btn-sm btn-link",onClick:t[0]||(t[0]=s=>d.gotoCollection("default"))},N)):u("",!0),o.$root.hasPermission("media.create")?(a(),l("button",j,O)):u("",!0)])]),e("div",Y,[e("div",K,[e("div",T,[e("div",q,[e("div",E,[(a(!0),l(h,null,p(i.collections.filter(s=>s.name!="default"),s=>(a(),l("div",{class:"col-6 col-sm-4 col-md-3 collections",key:s.name,onDblclick:g=>d.gotoCollection(s.name)},[e("div",G,[e("div",{class:"card-body p-0","data-bs-toggle":"tooltip","data-bs-offset":"0,4","data-bs-placement":"right","data-bs-html":"false",title:s.name??""},X,8,J),e("div",Z,[e("div",ee,c(s.name??""),1)])])],40,Q))),128)),(a(!0),l(h,null,p(i.allMedia,s=>(a(),l("div",{class:"col-6 col-sm-4 col-md-3 media",key:s.id},[e("div",se,[e("div",{class:"card-body p-0",title:s.name??""},[e("div",oe,[e("img",{src:s.original_url,style:{width:"100%","object-fit":"cover"},alt:s.name},null,8,de)])],8,te),e("div",ae,[e("div",le,c(d.limitChars(s.name??"",12)),1),e("div",ie,c(d.humanReadableSize(s.size??0)),1),ne,e("ul",re,[e("li",null,[e("a",{class:"dropdown-item",href:o.route("media.download",{id:s.id})},ue,8,ce)]),e("li",null,[e("a",{class:"dropdown-item",href:o.route("media.download",{id:s.id})},fe,8,he)]),e("li",null,[e("a",{href:"javascript:void(0);",class:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#deleteMedia",onClick:g=>d.deleteMediaPrompt(s.id,s.name)},ye,8,ve)])])])])]))),128))])])])])]),e("div",xe,[e("div",Me,[e("div",ke,[Ce,e("form",{id:"formAccountDelete",onSubmit:t[2]||(t[2]=M((...s)=>d.deleteMedia&&d.deleteMedia(...s),["prevent"]))},[e("div",Se,[e("div",Fe,[e("div",Pe,[e("p",null,'Are you sure you want to delete "'+c(r.media.name)+'"?',1)])])]),e("div",Ue,[e("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...s)=>d.resetform&&d.resetform(...s))},"Close"),Be])],32)])])]),e("div",Ie,[e("div",ze,[e("div",Ae,[De,e("div",Le,[e("div",Ve,[_(f,{id:"file_upload",parentCls:"w-100 upload-height",modelValue:r.media.file,"onUpdate:modelValue":t[3]||(t[3]=s=>r.media.file=s)},null,8,["modelValue"])])]),e("div",Ne,[e("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal",onClick:t[4]||(t[4]=(...s)=>d.resetform&&d.resetform(...s))},"Close"),e("button",{type:"button",class:"btn btn-main",onClick:t[5]||(t[5]=(...s)=>d.uploadMedia&&d.uploadMedia(...s))},"Upload")])])])])])])])]),_:1})])}const Te=S(F,[["render",je]]);export{Te as default};
